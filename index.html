<!doctype html>
<meta charset="utf-8">
<title>chat</title>
<script src="/socket.io/socket.io.js"></script>
<script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
<form><input></form><div></div>
<main>
  <div>
    <div id="acceleration">
      <h2>acceleration[m/s^2]</h2>
      <p>x: <span id="acc-x"></span></p>
      <p>y: <span id="acc-y"></span></p>
      <p>z: <span id="acc-z"></span></p>
    </div>
    <div id="accelerationIncludingGravity">
      <h2>accelerationIncludingGravity[m/s^2]</h2>
      <p>x: <span id="acc-gx"></span></p>
      <p>y: <span id="acc-gy"></span></p>
      <p>z: <span id="acc-gz"></span></p>
    </div>
    <div id="rotationRate">
      <h2>rotationRate[degree/s]</h2>
      <p>a: <span id="rr-a"></span></p>
      <p>b: <span id="rr-b"></span></p>
      <p>g: <span id="rr-g"></span></p>
    </div>
  </div>
</main>
<script>
/*
 var socket = io();
 $('form').submit(function () {
   socket.emit('msg', $('input').val());
   $('input').val('');
   return false;
 });
 socket.on('msg', function (data) {
   data = $('<div/>').text(data).html();
   $('div').prepend(data + '<br>');
 });
*/
      (function() {
        window.addEventListener("devicemotion", function(e){
          //加速度
          var acc = e.acceleration;
          var x = obj2NumberFix(acc.x, 5);
          var y = obj2NumberFix(acc.y, 5);
          var z = obj2NumberFix(acc.z, 5);
          //傾き(重力加速度)
          var acc_g = e.accelerationIncludingGravity;
          var gx = obj2NumberFix(acc_g.x, 5);
          var gy = obj2NumberFix(acc_g.y, 5);
          var gz = obj2NumberFix(acc_g.z, 5);
          //回転値
          var rota_r = e.rotationRate;
          var a = obj2NumberFix(rota_r.alpha, 5); //z方向
          var b = obj2NumberFix(rota_r.beta, 5); //x方向
          var g = obj2NumberFix(rota_r.gamma, 5); // y方向
          //表示
          print3('acc-x', x, 'acc-y', y, 'acc-z', z); //加速度
          print3('acc-gx', gx, 'acc-gy', gy, 'acc-gz', gz); //傾き
          print3('rr-a', a, 'rr-b', b, 'rr-g', g); //回転値
          // function
          function obj2NumberFix(obj, fix_deg){
            return Number(obj).toFixed(fix_deg);
          }
          function print3(id1, value1, id2, value2, id3, value3){
            print1(id1, value1);
            print1(id2, value2);
            print1(id3, value3);
          }
          function print1(id, value){
            var id_obj = document.getElementById(id);
            id_obj.innerHTML = value;
          }
        });
      })();
</script>
